"use strict";(self.webpackChunklh_site=self.webpackChunklh_site||[]).push([[6928],{2347:(e,s,a)=>{a.r(s),a.d(s,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>u,toc:()=>c});var r=a(4848),n=a(8453),t=a(1470),i=a(9365);const l={},o="User Tasks",u={id:"developer-guide/wfspec-development/user-tasks",title:"User Tasks",description:"User Tasks allow you to manage tasks involving humans alongside standard computer tasks in your LittleHorse Workflow.",source:"@site/docs/05-developer-guide/08-wfspec-development/08-user-tasks.md",sourceDirName:"05-developer-guide/08-wfspec-development",slug:"/developer-guide/wfspec-development/user-tasks",permalink:"/docs/developer-guide/wfspec-development/user-tasks",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Child Threads",permalink:"/docs/developer-guide/wfspec-development/child-threads"},next:{title:"Using the LittleHorse API",permalink:"/docs/developer-guide/grpc/"}},d={},c=[{value:"Assigning User Tasks",id:"assigning-user-tasks",level:2},{value:"Assigning to Users",id:"assigning-to-users",level:3},{value:"Assigning to Groups",id:"assigning-to-groups",level:3},{value:"Using User Task Outputs",id:"using-user-task-outputs",level:2},{value:"Using the Form Output",id:"using-the-form-output",level:3},{value:"Reminder Tasks",id:"reminder-tasks",level:3},{value:"Automatic Reassignment",id:"automatic-reassignment",level:3}];function h(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h1,{id:"user-tasks",children:"User Tasks"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"/docs/concepts/user-tasks",children:"User Tasks"})," allow you to manage tasks involving humans alongside standard computer tasks in your LittleHorse Workflow."]}),"\n",(0,r.jsx)(s.p,{children:"You can use the Workflow SDK's to schedule User Tasks, and also create lifecycle hooks such as:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Automatic Reassignment"}),"\n",(0,r.jsx)(s.li,{children:"Reminder Tasks"}),"\n",(0,r.jsx)(s.li,{children:"Automatic Cancellation."}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["See the ",(0,r.jsx)(s.a,{href:"/docs/developer-guide/grpc/managing-metadata",children:"Metadata Management docs"})," for information about how to create a ",(0,r.jsx)(s.code,{children:"UserTaskDef"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"assigning-user-tasks",children:"Assigning User Tasks"}),"\n",(0,r.jsx)(s.p,{children:"You can assign a User Task in two ways:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"To a specific User, specified by an arbitrary user id (and optionally a user group)."}),"\n",(0,r.jsx)(s.li,{children:"To a group of users."}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"assigning-to-users",children:"Assigning to Users"}),"\n",(0,r.jsxs)(s.p,{children:["To assign a user task to a specific user who is not a part of a group, you can use ",(0,r.jsx)(s.code,{children:"WorkflowThread#assignTaskToUser()"}),"."]}),"\n","\n",(0,r.jsxs)(t.A,{children:[(0,r.jsx)(i.A,{value:"java",label:"Java",default:!0,children:(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'String hardCodedUserId = "some-user-id-or-email";\nWfRunVariable userIdVariable = wf.addVariable("user-id", VariableType.STR);\n\n// Hard-coded using a string\nwf.assignUserTask("some-user-task-def", hardCodedUserId, null);\n\n// Using a variable to set User Id\nwf.assignUserTask("another-user-task-def", userIdVariable, null);\n'})})}),(0,r.jsx)(i.A,{value:"go",label:"Go",children:(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-go",children:'hardCodedUserId := "some-user-id-or-email"\nuserIdVariable := wf.AddVariable("user-id", lhproto.VariableType_STR)\n\n// Hard-coded using a string\nwf.AssignUserTask("some-user-task-def", &hardCodedUserId, nil)\n\n// Using a variable to set User Id\nwf.AssignUserTask("some-user-task-def", userIdVariable, nil)\n'})})}),(0,r.jsx)(i.A,{value:"python",label:"Python",children:(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-python",children:'hard_coded_user_id = "some-user-id-or-email"\nuser_id_variable = wf.add_variable("user-id", VariableType.STR)\n\n# assign using a hard coded string\nwf.assign_user_task("some-user-task", user_id=hard_coded_user_id)\n\n# assign using a variable\nwf.assign_user_task("some-user-task", user_id=user_id_variable)\n'})})})]}),"\n",(0,r.jsxs)(s.p,{children:["You can also assign a user task to a user as part of a group using ",(0,r.jsx)(s.code,{children:"WorkflowThread#assignUserTask"}),":"]}),"\n",(0,r.jsxs)(t.A,{children:[(0,r.jsx)(i.A,{value:"java",label:"Java",default:!0,children:(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'WfRunVariable userIdVariable = wf.addVariable("user-id", VariableType.STR);\nWfRunVariable userGroupVariable = wf.addVariable("user-group", VariableType.STR);\nString hardCodedUserGroup = "finance";\n\n// Hard-coded using a string\nwf.asignUserTask("some-user-task-def", userIdVariable, hardCodedUserGroup);\n\n// Using a variable to set User Group\nwf.assignUserTask("another-user-task-def", userIdVariable, userGroupVariable);\n'})})}),(0,r.jsx)(i.A,{value:"go",label:"Go",children:(0,r.jsxs)(s.p,{children:["Golang user task docs coming soon. But if you want, you can try it out anyways ","\ud83d\ude09","."]})})]}),"\n",(0,r.jsx)(s.h3,{id:"assigning-to-groups",children:"Assigning to Groups"}),"\n",(0,r.jsxs)(s.p,{children:["You can assign a task to a user group using ",(0,r.jsx)(s.code,{children:"WorkflowThread#assignUserTask()"}),"."]}),"\n",(0,r.jsxs)(t.A,{children:[(0,r.jsx)(i.A,{value:"java",label:"Java",default:!0,children:(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'String hardCodedUserGroup = "sales";\nWfRunVariable userGroupVariable = wf.addVariable("user-group", VariableType.STR);\n\n// Hard-coded using a string\nString userId = null;\nwf.assignUserTask("some-user-task-def", userId, hardCodedUserGroup);\n\n// Using a variable to set User Group\nwf.assignUserTask("another-user-task-def", userId, userGroupVariable);\n'})})}),(0,r.jsx)(i.A,{value:"go",label:"Go",children:(0,r.jsxs)(s.p,{children:["GoLang docs for user tasks coming soon. But if you want, you can try it out anyways ","\ud83d\ude09","."]})})]}),"\n",(0,r.jsx)(s.h2,{id:"using-user-task-outputs",children:"Using User Task Outputs"}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"assignTaskToUser"})," and ",(0,r.jsx)(s.code,{children:"assignTaskToUserGroup"})," methods return a ",(0,r.jsx)(s.code,{children:"UserTaskOutput"}),", which is a special type of ",(0,r.jsx)(s.code,{children:"NodeOutput"}),". It can be used to:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Mutate variables"}),"\n",(0,r.jsx)(s.li,{children:"Schedule reminder tasks"}),"\n",(0,r.jsx)(s.li,{children:"Schedule user task reassignment."}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"using-the-form-output",children:"Using the Form Output"}),"\n",(0,r.jsxs)(s.p,{children:["You can use a ",(0,r.jsx)(s.code,{children:"UserTaskOutput"})," to mutate variables. Note that a ",(0,r.jsx)(s.code,{children:"UserTaskDef"})," has a series of fields, where each field has a ",(0,r.jsx)(s.code,{children:"name"})," and ",(0,r.jsx)(s.code,{children:"value"})," (which is a ",(0,r.jsx)(s.code,{children:"VariableValue"})," containing a primitive type)."]}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"UserTaskOutput"})," is essentially a Json output where each key is the name of each field, and the value is the value typed by the user. Let's say I have a user task def with two fields:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"userName"}),", which is a ",(0,r.jsx)(s.code,{children:"STR"})]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"age"}),", which is an ",(0,r.jsx)(s.code,{children:"INT"})]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"You can use the value as follows:"}),"\n",(0,r.jsxs)(t.A,{children:[(0,r.jsx)(i.A,{value:"java",label:"Java",default:!0,children:(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'WfRunVariable age = wf.addVariable("age", VariableType.INT);\nWfRunavariable userName = wf.addVariable("user-name", VariableType.STR);\n\nUserTaskOutput formResults = wf.assignUserTask("my-user-task", "obi-wan", null);\nwf.mutate(age, VariableMutationType.ASSIGN, formResults.jsonPath("$.age"));\nwf.mutate(userName, VariableMutationType.ASSIGN, formResults.jsonPath("$.userName"));\n'})})}),(0,r.jsx)(i.A,{value:"go",label:"Go",children:(0,r.jsxs)(s.p,{children:["GoLang docs for user tasks coming soon. But if you want, you can try it out anyways ","\ud83d\ude09","."]})})]}),"\n",(0,r.jsx)(s.h3,{id:"reminder-tasks",children:"Reminder Tasks"}),"\n",(0,r.jsxs)(s.p,{children:["You can use the ",(0,r.jsx)(s.code,{children:"UserTaskOutput"}),' to schedule a "Reminder Task", which is a ',(0,r.jsx)(s.code,{children:"TaskRun"})," that runs a set period of time after the User Task is scheduled. If the ",(0,r.jsx)(s.code,{children:"UserTaskRun"})," has been completed, cancelled, or reassigned by the time the Reminder Task is scheduled, ",(0,r.jsx)(s.em,{children:"the Reminder Task does not execute."})]}),"\n",(0,r.jsxs)(t.A,{children:[(0,r.jsx)(i.A,{value:"java",label:"Java",default:!0,children:(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'UserTaskOutput userTask = wf.assignTaskToUser("some-task", "yoda");\n\nint delaySeconds = 60; // wait one minute before reminder\n\nString taskArg1 = "reply to my email, you must!";\nString taskArg2 = "for my ally is the Force, and a powerful ally it is";\n\nString taskDefName = "send-reminder";\nwf.scheduleTaskAfter(userTask, delaySeconds, taskDefName, taskArg1, taskArg2);\n'})})}),(0,r.jsx)(i.A,{value:"go",label:"Go",children:(0,r.jsx)(s.p,{children:"GoLang support for user tasks coming soon."})})]}),"\n",(0,r.jsx)(s.h3,{id:"automatic-reassignment",children:"Automatic Reassignment"}),"\n",(0,r.jsxs)(s.p,{children:["You can use the ",(0,r.jsx)(s.code,{children:"UserTaskOutput"}),' to automatically "release" a task from a specific user to that user\'s group after a period of time passes.']}),"\n",(0,r.jsx)(s.admonition,{type:"note",children:(0,r.jsxs)(s.p,{children:["This only works if you assign the user task to a user ",(0,r.jsx)(s.em,{children:"and specify the group the user belongs to"}),"."]})}),"\n",(0,r.jsxs)(t.A,{children:[(0,r.jsx)(i.A,{value:"java",label:"Java",default:!0,children:(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-java",children:'String userGroup = "jedi-council";\nUserTaskOutput userTask = wf.assignUsrTask("some-task", "Mace Windu", userGroup);\n\n// If Mace Windu doesn\'t respond in 1 hour, allow any other Jedi Council member to claim\n// the task.\nwf.releaseToGroupOnDeadline(userTask, 60 * 60);\n'})})}),(0,r.jsx)(i.A,{value:"go",label:"Go",children:(0,r.jsxs)(s.p,{children:["GoLang support for user tasks coming soon. But if you want, you can try it out anyways ","\ud83d\ude09","."]})})]})]})}function p(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},9365:(e,s,a)=>{a.d(s,{A:()=>i});a(6540);var r=a(8215);const n={tabItem:"tabItem_Ymn6"};var t=a(4848);function i(e){let{children:s,hidden:a,className:i}=e;return(0,t.jsx)("div",{role:"tabpanel",className:(0,r.A)(n.tabItem,i),hidden:a,children:s})}},1470:(e,s,a)=>{a.d(s,{A:()=>T});var r=a(6540),n=a(8215),t=a(3104),i=a(6347),l=a(205),o=a(7485),u=a(1682),d=a(9466);function c(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:s}=e;return!!s&&"object"==typeof s&&"value"in s}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:s,children:a}=e;return(0,r.useMemo)((()=>{const e=s??function(e){return c(e).map((e=>{let{props:{value:s,label:a,attributes:r,default:n}}=e;return{value:s,label:a,attributes:r,default:n}}))}(a);return function(e){const s=(0,u.X)(e,((e,s)=>e.value===s.value));if(s.length>0)throw new Error(`Docusaurus error: Duplicate values "${s.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[s,a])}function p(e){let{value:s,tabValues:a}=e;return a.some((e=>e.value===s))}function g(e){let{queryString:s=!1,groupId:a}=e;const n=(0,i.W6)(),t=function(e){let{queryString:s=!1,groupId:a}=e;if("string"==typeof s)return s;if(!1===s)return null;if(!0===s&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:s,groupId:a});return[(0,o.aZ)(t),(0,r.useCallback)((e=>{if(!t)return;const s=new URLSearchParams(n.location.search);s.set(t,e),n.replace({...n.location,search:s.toString()})}),[t,n])]}function f(e){const{defaultValue:s,queryString:a=!1,groupId:n}=e,t=h(e),[i,o]=(0,r.useState)((()=>function(e){let{defaultValue:s,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(s){if(!p({value:s,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${s}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return s}const r=a.find((e=>e.default))??a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:s,tabValues:t}))),[u,c]=g({queryString:a,groupId:n}),[f,m]=function(e){let{groupId:s}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(s),[n,t]=(0,d.Dv)(a);return[n,(0,r.useCallback)((e=>{a&&t.set(e)}),[a,t])]}({groupId:n}),b=(()=>{const e=u??f;return p({value:e,tabValues:t})?e:null})();(0,l.A)((()=>{b&&o(b)}),[b]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);o(e),c(e),m(e)}),[c,m,t]),tabValues:t}}var m=a(2303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=a(4848);function k(e){let{className:s,block:a,selectedValue:r,selectValue:i,tabValues:l}=e;const o=[],{blockElementScrollPositionUntilNextRender:u}=(0,t.a_)(),d=e=>{const s=e.currentTarget,a=o.indexOf(s),n=l[a].value;n!==r&&(u(s),i(n))},c=e=>{let s=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const a=o.indexOf(e.currentTarget)+1;s=o[a]??o[0];break}case"ArrowLeft":{const a=o.indexOf(e.currentTarget)-1;s=o[a]??o[o.length-1];break}}s?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.A)("tabs",{"tabs--block":a},s),children:l.map((e=>{let{value:s,label:a,attributes:t}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:r===s?0:-1,"aria-selected":r===s,ref:e=>o.push(e),onKeyDown:c,onClick:d,...t,className:(0,n.A)("tabs__item",b.tabItem,t?.className,{"tabs__item--active":r===s}),children:a??s},s)}))})}function v(e){let{lazy:s,children:a,selectedValue:n}=e;const t=(Array.isArray(a)?a:[a]).filter(Boolean);if(s){const e=t.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:t.map(((e,s)=>(0,r.cloneElement)(e,{key:s,hidden:e.props.value!==n})))})}function x(e){const s=f(e);return(0,j.jsxs)("div",{className:(0,n.A)("tabs-container",b.tabList),children:[(0,j.jsx)(k,{...s,...e}),(0,j.jsx)(v,{...s,...e})]})}function T(e){const s=(0,m.A)();return(0,j.jsx)(x,{...e,children:c(e.children)},String(s))}},8453:(e,s,a)=>{a.d(s,{R:()=>i,x:()=>l});var r=a(6540);const n={},t=r.createContext(n);function i(e){const s=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);