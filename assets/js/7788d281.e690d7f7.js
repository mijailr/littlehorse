"use strict";(self.webpackChunklh_site=self.webpackChunklh_site||[]).push([[7454],{7736:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>l,frontMatter:()=>c,metadata:()=>t,toc:()=>h});var d=r(4848),i=r(8453);const c={},s="Child Threads",t={id:"concepts/child-threads",title:"Child Threads",description:"As discussed in the WfRun documentation, a WfRun can have multiple ThreadRuns. The main thread is called the Entrypoint Thread, and all other threads are children (or grandchildren) of the entrypoint.",source:"@site/docs/04-concepts/08-child-threads.md",sourceDirName:"04-concepts",slug:"/concepts/child-threads",permalink:"/docs/concepts/child-threads",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Task Workers",permalink:"/docs/concepts/task-workers"},next:{title:"Conditional Branching",permalink:"/docs/concepts/conditionals"}},a={},h=[{value:"Entrypoint Thread",id:"entrypoint-thread",level:2},{value:"Thread Types",id:"thread-types",level:2},{value:"Variable Scoping",id:"variable-scoping",level:2}];function o(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h1,{id:"child-threads",children:"Child Threads"}),"\n",(0,d.jsxs)(n.p,{children:["As discussed in the ",(0,d.jsxs)(n.a,{href:"/docs/concepts/workflows",children:[(0,d.jsx)(n.code,{children:"WfRun"})," documentation"]}),", a ",(0,d.jsx)(n.code,{children:"WfRun"})," can have multiple ",(0,d.jsx)(n.code,{children:"ThreadRun"}),"s. The main thread is called the Entrypoint Thread, and all other threads are children (or grandchildren) of the entrypoint."]}),"\n",(0,d.jsx)(n.h2,{id:"entrypoint-thread",children:"Entrypoint Thread"}),"\n",(0,d.jsxs)(n.p,{children:["A ",(0,d.jsx)(n.code,{children:"WfSpec"})," defines one or more ",(0,d.jsx)(n.code,{children:"ThreadSpec"}),"s, and the corresponding ",(0,d.jsx)(n.code,{children:"WfRun"})," has one or more ",(0,d.jsx)(n.code,{children:"ThreadRun"}),"s. Each ",(0,d.jsx)(n.code,{children:"ThreadRun"})," has a corresponding ",(0,d.jsx)(n.code,{children:"ThreadSpec"})," in the ",(0,d.jsx)(n.code,{children:"WfSpec"}),"."]}),"\n",(0,d.jsxs)(n.p,{children:["In every ",(0,d.jsx)(n.code,{children:"WfSpec"}),", one ",(0,d.jsx)(n.code,{children:"ThreadSpec"})," is special: it is the ",(0,d.jsx)(n.code,{children:"ENTRYPOINT"})," thread. Similarly, each ",(0,d.jsx)(n.code,{children:"WfRun"})," has a special ",(0,d.jsx)(n.code,{children:"ENTRYPOINT"})," thread run."]}),"\n",(0,d.jsxs)(n.p,{children:["When you run a ",(0,d.jsx)(n.code,{children:"WfSpec"})," (thereby creating a ",(0,d.jsx)(n.code,{children:"WfRun"}),"), the resulting ",(0,d.jsx)(n.code,{children:"WfRun"})," is created with one entrypoint ",(0,d.jsx)(n.code,{children:"ThreadRun"}),", which (as you guessed) is specified by the entrypoint ",(0,d.jsx)(n.code,{children:"ThreadSpec"})," of the ",(0,d.jsx)(n.code,{children:"WfSpec"}),"."]}),"\n",(0,d.jsx)(n.h2,{id:"thread-types",children:"Thread Types"}),"\n",(0,d.jsxs)(n.p,{children:["A ",(0,d.jsx)(n.code,{children:"WfRun"})," may have multiple ",(0,d.jsx)(n.code,{children:"ThreadRun"}),"s in it. ",(0,d.jsx)(n.code,{children:"ThreadRun"}),"s have four types:"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"ENTRYPOINT"})," threads, described above."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"CHILD"})," thread, created explicitly via a ",(0,d.jsx)(n.code,{children:"SPAWN_THREAD"})," node (in Java, for example, ",(0,d.jsx)(n.code,{children:"WorkflowThread::spawnThread()"}),")."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"INTERRUPT"})," thread, triggered by an External Event."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"FAILURE_HANDLER"})," threads, which are akin to exception handlers in programming."]}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["All ",(0,d.jsx)(n.code,{children:"ThreadRun"}),"s other than the entrypoint thread will have a ",(0,d.jsx)(n.code,{children:"parentThreadId"}),", referring to the thread that spawned it. In the case of an ",(0,d.jsx)(n.code,{children:"INTERRUPT"})," thread, the parent thread is the thread that was interrupted; in the case of a ",(0,d.jsx)(n.code,{children:"FAILURE_HANDLER"})," thread, the parent is the thread whose failure triggered the exception handler."]}),"\n",(0,d.jsx)(n.h2,{id:"variable-scoping",children:"Variable Scoping"}),"\n",(0,d.jsxs)(n.p,{children:["A ",(0,d.jsx)(n.code,{children:"ThreadSpec"})," can define ",(0,d.jsx)(n.code,{children:"Variable"}),"s (for example, through the ",(0,d.jsx)(n.code,{children:"variableDefs"})," field in the JSON spec, or ",(0,d.jsx)(n.code,{children:"WorkflowThread::adVariable()"})," in Java). When a ",(0,d.jsx)(n.code,{children:"ThreadRun"})," is created, all defined ",(0,d.jsx)(n.code,{children:"Variable"}),"s are instantiated (either with input values or as ",(0,d.jsx)(n.code,{children:"NULL"}),")."]}),"\n",(0,d.jsxs)(n.p,{children:["When a child ",(0,d.jsx)(n.code,{children:"ThreadRun"})," of any type is started, it has ",(0,d.jsx)(n.em,{children:"read and write"})," access to its own ",(0,d.jsx)(n.code,{children:"Variable"}),"s, and all ",(0,d.jsx)(n.code,{children:"Variable"}),"s that its parent has access to (including the parent's parent, and so on)."]}),"\n",(0,d.jsxs)(n.p,{children:["Since a ",(0,d.jsx)(n.code,{children:"ThreadRun"})," can have multiple children, the parent does ",(0,d.jsx)(n.em,{children:"not"})," have access to the variables of the children."]})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>t});var d=r(6540);const i={},c=d.createContext(i);function s(e){const n=d.useContext(c);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),d.createElement(c.Provider,{value:n},e.children)}}}]);